# 其他思考

1. 手机的的应用怎么调用服务器提供的接口，来实现业务功能呢？   在设计的时候需要考虑三方面的问题

**【通信协议】**

**【接口协议】**

**【会话管理】**

我们知道，用户通过浏览器登录网站以后，  服务器可以产生session （会话）, 这个session 通常会以cookie的方式(在Http协议的Header 中)发送给浏览器， 浏览器需要保存起来， 再次访问网站的时候， 会把cookie带过去， 这样服务器就知道用户是谁了。 

session 一般有个过期时间，例如30分钟， 超过这个时间如果浏览器不再访问的话， 这个session 就过时了， 需要重新登录。 

手机端应用当然也可以模拟浏览器， 以同样的方式处理，  登录以后，就把服务器发的session ID 保存起来， 下次访问其他接口时把这个session 发过去就可以了。
 

但是你仔细想一下，手机和浏览器是不一样的： 手机端经常是登录以后， 可以长时间不操作（例如7天）， session 也不会过期。

很多手机端应用可以保持很长时间的会话状态， 例如7天以内不操作都不会过期， 7天以后才会要求重新登录。 

这样服务器针对浏览器搞的Cookie 超时时间 30分钟就太短了。 

换句话说，手机端应用由于操作的特性， 需要保持一个长会话（3天， 7天。。）， 传统的session机制不合适。

这时候需要我们自己来设计实现一个会话的管理机制：

\1. 手机端应用调用服务器端的登录接口。

\2. 服务器生成一个token ， token 可以通过算法设计成一个随机的字符串， 让黑客无法猜出。 服务器把token 放到缓存或者数据库中， 设置一个过期时间，例如7天

\3. 服务器把token 发回给手机端

\4. 手机端保存该token ,  每次访问其他接口的时候需要把token 也发到服务器端做认证， 如果服务器端发现token 过期， 就会要求手机端重新登录

这样就实现了一个长时间的会话管理。